<div class="main_container" *ngIf="(fa.user | async) as user; else showLogin">

  <button (click)="logout()">Logout</button>


  <mat-horizontal-stepper [linear]="isLinear" #stepper>


    <mat-step [stepControl]="firstFormGroup">
      <form [formGroup]="firstFormGroup">
        <h1 class="mat-display-1">Welcome {{ user.displayName }}!</h1>
        <h2 class="mat-h1">Just few more Steps</h2>
        <ng-template matStepLabel>Fill out your student details</ng-template>
        <div class="form_step_1" fxLayout.xs="column" fxLayout="row" fxLayoutAlign="start start" fxLayoutGap="50px">
          <mat-form-field class="school_input">
            <input type="text" formControlName="Admissionctrl" placeholder="Select School" aria-label="Number" matInput
              [formControl]="myControl" [matAutocomplete]="auto">
            <mat-autocomplete #auto="matAutocomplete">
              <mat-option *ngFor="let option of filteredOptions | async" [value]="option">
                {{option}}
              </mat-option>
            </mat-autocomplete>
          </mat-form-field>
          <mat-form-field>
            <mat-label>Choose your batch</mat-label>
            <mat-select formControlName="batchctrl">
              <mat-option value="2016">2016</mat-option>
              <mat-option value="2015">2015</mat-option>
              <mat-option value="2014">2014</mat-option>
              <mat-option value="2013">2013</mat-option>
              <mat-option value="2012">2012</mat-option>
              <mat-option value="2011">2011</mat-option>
              <mat-option value="2010">2010</mat-option>
              <mat-option value="2009">2009</mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <div>
          <button mat-raised-button color="primary" matStepperNext>Next</button>
        </div>
      </form>
    </mat-step>



    <mat-step [stepControl]="secondFormGroup">
      <form [formGroup]="secondFormGroup">

        <ng-template matStepLabel>Fill out your personal details</ng-template>
        <div class="form_step_1" fxLayout="row" fxLayoutAlign="start start" fxLayoutGap="50px">
          <h2 class="mat-h1">Make Other people of your school get to know you</h2>
        </div>
        <div class="form_step_2" fxLayout="row" fxLayoutAlign="start start" fxLayout.xs="column" fxLayoutGap="50px">

          <mat-form-field>
            <input matInput placeholder="Work/Study place" formControlName="workCtrl" required>
          </mat-form-field>

          
          <mat-form-field>
            <input matInput placeholder="Address" formControlName="addressCtrl" required>
          </mat-form-field>
        </div>

        <div class="form_2_buttons" fxLayout="row" fxLayoutAlign="start start" fxLayoutGap="30px">
          <button mat-flat-button color="warn" matStepperPrevious>Back</button>
          <button mat-flat-button color="primary" matStepperNext>Next</button>
        </div>


      </form>
    </mat-step>


    <mat-step>
      <ng-template matStepLabel>Consent</ng-template>
      <h1 class="mat-h1">We want your consent</h1>
      <mat-card>
        <h3>Data Protection Act 1998 - Declaration</h3>
        <p>By completing this form, I give permission for my data to be held in the Leeds (West Yorkshire and the Dales) 
          diocesan database and agree that the Diocese may process personal data relating to me for personnel,
           administration and/or management purposes, make such date available to its advisers and as required by law.</p>


        <p>We would also like to make your contact details available to the public via future Diocesan Directories,
           in print or online.  
          It is hoped you will be content for this to happen so others in the Diocese are able to contact you. </p>


        <p>I give my permission for my contact details to be made available to the public 
          in the ways described above.</p>

          <section class="example-section">
              <mat-checkbox class="example-margin" color="primary" [(ngModel)]="checked">I Agree to These terms and conditions </mat-checkbox>
            </section>

      </mat-card>
      <div class="step3_buttons" fxLayout="row" fxLayoutAlign="center center" fxLayoutGap="30px">
        <button mat-flat-button matStepperPrevious>Back</button>
        <button mat-flat-button color="warn" (click)="stepper.reset()">Reset</button>
        <button mat-raised-button color="primary" disabled={{!checked}}>Confirm</button>
      </div>
    </mat-step>

    
  </mat-horizontal-stepper>
</div>




<ng-template #showLogin>
  <mat-card class="mat-card-1">
    <mat-card-title>Please Login</mat-card-title>
    <mat-card-content>
      <div class="profile-picture">
        <img src="../../assets/images/pp.png" />
      </div>
      <div class="mat-card-content">
        <button mat-raised-button color="primary" class="button" (click)="login()">
          <img src="../../assets/images/fb_logo.webp" id="facebook-icon" />Login
          with Facebook
        </button>
      </div>
    </mat-card-content>
  </mat-card>
</ng-template>